# 脚本和虚拟机
EOS 将是第一个协同用户间认证消息传递的重要平台。脚本语言和虚拟机的具体实现与EOS 系统的设计是分离的。任何语言或者虚拟机，只要满足确定性和沙箱化，并且性能足够高，它就可以与EOS API集成。

## 模式定义的消息
所有用户间发送的消息都是通过模式定义出来，它是区块链共识状态的一部分。这个模式允许消息在二进制与JSON格式之间无缝的转换。

## 模式定义的数据库
数据库状态也是通过类似的模式来定义的。这是为了确保所有应用存储的数据都可以转换成人类可读的JSON格式，而其存储和操作时在采用高效的二进制格式。

## 分离鉴权和应用
为了最大限度的实现并行，并最小化从交易日志中恢复应用状态所需的计算债务，EOS 软件将验证逻辑分成三个部分：

1. 验证消息是否内部一致
2. 验证所有前提消息是否有效
3. 修改应用程序状态

验证消息内部一致性的操作是只读的，并且不需要访问区块链的状态。这就意味着此操作可以最大限度的并行化。验证前提条件的操作，例如验证余额是否足够，这也是只读的，因此也可以尽量并行化。只有修改应用程序状态需要写操作，对于每个应用来说，此操作只能顺序化的执行。

鉴权是一个验证消息是否能够被执行的只读过程。应用程序则实际的执行消息命令。在同一时间，这两种计算都需要被处理，然而，一旦交易被包含在区块中后就不再需要执行鉴权操作了。

## 虚拟机独立架构
EOS 区块链支持多种虚拟机，并且随着时间的推移，可以根据需要来增加新的虚拟机。因此，在这份白皮书中不会讨论某个具体的脚本语言和虚拟机。不过，目前EOS正在评估可能使用的虚拟机有两种，分别是WASM（Web Assembly）和以太坊虚拟机

### Web Assembly（WASM）
Web Assmembly 是一种为了构建高性能的Web应用而兴起的Web 标准。只需要进行少量的修改，Web Assembly 就可以支持确定性和沙盒化的特性，从而能够满足了EOS对脚本语言的要求。Web Assembly 的好处是它有着广泛的产业支持，并且它可以让开发者使用熟悉的语言，例如C和C++ 来开发智能合约。

以太坊的开发者已经开始更改Web Assembly来提供适当的沙盒化与确定性的支持，这使得它很容易在EOS中适配和集成。

### 以太坊虚拟机（EVM）
以太坊虚拟机已经被众多已有的智能合约所使用，并且可以通过适配应用在EOS区块链中。可以想象，以太坊合同能够以沙盒化的方式在EOS区块链上运行，并且通过一些适配，以太坊合同能够与EOS上的应用之间相互交流。


## links
  * [目录](<preface.md>)
  * 上一节: [智能合约](<06.0.md>)
  * 下一章: [存储模型](<07.0.md>)



